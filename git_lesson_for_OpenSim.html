<!DOCTYPE html>
<html>
<head>
<title>Title</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
/* Slideshow styles */
</style>
</head>
<body>
<textarea id="source">

class: center, middle

# A lesson on Git for the OpenSim project

---

# Agenda

1. Why are we switching from SVN/SimTK to Git/GitHub?
2. How is Git different from SVN?
3. Install git on your computer.
4. Tutorial A: **using** the Simbody Git repository.
    a. TortoiseGit
    b. command-line git
5. Tutorial B: **contributing** to a repository.
    a. TortoiseGit
    b. command-line git
6. Managing you're own project.
7. Review of key concepts.

NOT covering: how to be the maintainer of a git project.

---

# Why are we switching from SVN/SimTK to Git/GitHub?

1. **SVN** and **SimTK**:

    a. simple (central repository, fewer commands, simpler concepts).

    b. discourages code review.

    c. branching has high inertia, discourages experimenting.

    d. difficult for outsiders to contribute to the project (open source?).

2. **GitHub**:

    a. easy to take someone's code and modify it for your own purposes (fork).

    b. friction-less way to tell developers about bugs (issues).

    c. easy to contribute to projects to which you're not a member (pull request).

    d. job opportunitites (employers ask for your GitHub username).

3. **Git**:

    a. easy to branch code (encourages parallel development, experimenting).

    b. allows use of GitHub.

    c. complicated.

    d. same number of letters as 'SVN'.


---

# SVN branches vs git branches

**SVN**

* Branches are copies of the code in a different part of the repository.
* A revision contains all branches.
* Branches often linger and are not deleted, even after they are no longer used.
* Branches are made infrequently. Majority of coding happens in master.
* Our usage of branches:
    1. Create release branch, develop in parallel with Trunk (unstable)
    2. When release is done, merge part of release branch back into Trunk.

**GIT**

* Branches are just labels to commits (git's revision).
* Commits represent a state of the entire repository.
* Branches are meant to be deleted.
* Make lots of branches. All work is done in outside of the master branch (for
    projects of our scale).
    * Feature branches: "new-component-interface"
    * Bugfix branches: "issue-37"
* No parallel development (for the most part, everything goes into master).
* Usage:
    1. To implement a feature, make feature branch.
    2. When done with feature, merge back into Trunk.
    3. master is always stable; unstable code is in feature branches.
    4. When ready for a release, tag a commit on the master branch.

TODO figure svn branches vs git branches

---

# Install git

1. Install msysGit
    a. Use Git Bash only (cannot access git from regular Command Window).
    b. Checkout Windows-style, commit Unix-style line endings.
2. Install TortoiseGit.
3. Configure GIT on your computer.
    a. git config --global user.name
    b. git config --global user.email
    c. SSH TODO
4. Create an account on GitHub.
5. Get added to opensim-org.
6. Explore the opensim-org page.

# Consuming code on GitHub: Simbody

1. Clone the simbody/simbody repository to your computer.
2. Explore with TortoiseGit: clone, log, remotes, branches, tags, checkout, revision graph.
3. Explore with command-line git:
    ```
    git clone https;//github.com/simbody/simbody.git
    git remote -v # -v for verbose
    git branch
    git tag
    git status
    git log
    git checkout Simbody-3.4.1 # this is a tag.
    ```

---

# Contributing: dummy-repo (slide 1)

1. GitHub fork.
2. Clone your fork.
    ```
    git clone https://github.com/myname/dummy-repo.git 
    ```
3. Add the upstream repository as a remote on your computer.
    ```
    git remote add upstream https://github.com/opensim-org/dummy-repo.git
    ```
4. Create a new branch.
    ```
    git checkout -b myfeature 
    ```
5. Make some changes.
    a. Create a new file.
    b. Add a new file.
    ```
    git add mynewfile.txt
    ```
    d. What's the state of the working copy?
    ```
    git status
    ```

6. Commit changes.
    ```
    git commit -am"My message." # -a to commit all tracked changes.
    git commit -m"my message."
    git commit
    ```

TODO figure git remotes.

---

# Contributing: dummy-repo (slide 2)

1. Push your changes to your fork.
    ```
    git push origin myfeature
    ```
2. Create a pull request on GitHub.
3. Update your local repository and delete your feature branch.
    ```
    git checkout master 
    git pull upstream master
    git branch -d myfeature # delete LOCAL feature branch
    ```

4. Deal with upstream changes (that occured while you worked on feature).

    a.  Repeat previous slide.

    b.  Rebase.
    ```
    git checkout master
    git pull upstream master
    git checkout myfeature
    git rebase master
    ```

---

# Developing on a project for which you're a member (also: personal projects).

* Don't use a fork.
* Commmit directly to master.

---

# Review of git/GitHub terms and commands

## Terms
* HEAD
* master
* origin
* upstream

## Commands (what's the equivalent in SVN?)
* git clone (svn checkout)
* git status (svn status)
* git commit (svn commit)
* git add (part of svn commit)
* git checkout (N/A)
* git merge (svn merge)
* git rebase (N/A)
* git reset (svn revert)
* git branch (N/A)
* git tag (N/A)
* git remote [add] (N/A)
* git cherry-pick (N/A)
* git rm [--cached]
* git init
* git fork
* git pull-request

---

# Culture

1. Don't work directly on the master branch.
2. Commit often, and atomically (code should compile at each commit).
3. Commit messages

    b. First line should be brief; 70 characters.

    c. Skip a line before your detailed description.

</textarea>
<script src="remark-0.6.2.min.js" type="text/javascript">
</script>
<script type="text/javascript">
 var slideshow = remark.create();
</script>
</body>
</html>
